<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/layout}"
        lang="en"
>
<head>
    <link rel="stylesheet" type="text/css" href="/css/meeting/meetingMain.css">
</head>

<div layout:fragment="content">
    <div class="container">
        <div class="meeting_text">
            <p class="text1">모임 게시판</p>
        </div>

        <form id="sortingForm" method="get">
            <div class="middle_container">
                <div class="region_box">
                    <select id="region" name="region" onchange="submitForm()">
                        <option value="0" selected>지역 선택</option>
                        <option value="1">중구</option>
                        <option value="2">서구</option>
                        <option value="3">동구</option>
                        <option value="4">영도구</option>
                        <option value="5">부산진구</option>
                        <option value="6">동래구</option>
                        <option value="7">남구</option>
                        <option value="8">북구</option>
                        <option value="9">해운대구</option>
                        <option value="10">사하구</option>
                        <option value="11">금정구</option>
                        <option value="12">강서구</option>
                        <option value="13">연제구</option>
                        <option value="14">수영구</option>
                        <option value="15">사상구</option>
                        <option value="16">기장군</option>
                    </select>
                </div>


                <div class="category_box">
                    <select id="category" name="category" onchange="submitForm()">
                        <option value="0" selected>게시글 유형</option>
                        <option value="1">온라인</option>
                        <option value="2">오프라인</option>
                    </select>
                </div>

                <div class="writing_box">
                    <a href="/meeting/write" class="writing_btn">글쓰기</a>
                </div>
            </div>
        </form>



        <div class="inner_container">
            <!-- 상단 -->
            <div class="title_box">
                <div class="title_imgCheck">

                </div>

                <div class="title_1">
                    <p>번호</p>
                </div>

                <div class="title_2">
                    <p>지역</p>
                </div>

                <div class="title_3">
                    <p>제목</p>
                </div>

                <div class="title_4">
                    <p>글쓴이</p>
                </div>

                <div class="title_5">
                    <p>작성일</p>
                </div>

                <div class="title_6">
                    <p>조회</p>
                </div>

                <div class="title_7">
                    <p>인원</p>
                </div>
            </div>

            <div class="line">
                <div class="horizontal-line3"></div>
            </div>


            <!-- 내용 -->
            <div class="meetList" th:each="info : ${boardList}">
                <div class="content_box">
                    <!-- 이미지 유무 아이콘 -->
                    <div class="content_imgCheck" th:with="imgIndex=${imageInfo[__${infoStat.index}__]}">
                        <img th:src="@{${(imgIndex == 1) ? '/images/imageCheckIcon1.png' : '/images/imageCheckIcon2.png'}}"
                             th:alt="${(imgIndex == 1) ? 'Image Icon 1' : 'Image Icon 2'}"
                             style="width: 30px; height: 30px;">
                    </div>

                    <!-- 게시글 번호 -->
                    <div class="content_1">
                        <p th:text="${info.meetNum}"></p>
                    </div>

                    <!-- 지역 -->
                    <div class="content_2">
                        <p th:text="${info.meet_field}"></p>
                    </div>



                    <!-- 제목 -->
                    <div class="content_3">
                        <a th:href="@{/meeting/detail/{meetNum}(meetNum=${info.meetNum})}" th:text="'[' + ${info.meet_category == 1 ? '온라인' : (info.meet_category == 2 ? '오프라인' : '')} + ']' + ' ' + ${info.meet_title}"></a>
                    </div>

                    <!-- 글쓴이 -->
                    <div class="content_4">
                        <p th:text="${info.meet_nick_name}"></p>
                    </div>

                    <!-- 작성일 -->
                    <div class="content_5">
                        <p th:text="${#temporals.format(info.meet_write_date, 'yyyy-MM-dd HH:mm:ss')}"></p>
                    </div>

                    <!-- 조회 -->
                    <div class="content_6">
                        <p th:text="${info.meet_views}"></p>
                    </div>

                    <!-- 인원 -->
                    <div class="content_7">
                        <p th:text="${info.meet_now_participants}"></p> <p>&nbsp;/&nbsp;</p> <p th:text="${info.meet_max_participants}"></p>
                    </div>
                </div>
                <div class="horizontal-line1"></div>
            </div>


        </div>


        <div class="margin_bottom"></div>

        <div class="paging_box">
            <ul class="pagination" th:with="start=${T(java.lang.Math).floor(boardList.number/10)*10 + 1},
                    last=(${start + 9 < boardList.totalPages ? start + 9 : boardList.totalPages})">
                <li>
                    <a th:href="@{/meeting/main/search(search_option=${searchOption}, search=${search}, page=1)}"><<</a>
                </li>

                <li th:class="${boardList.first} ? 'disabled'">
                    <a th:href="${boardList.first} ? '#' : @{/meeting/main/search(search_option=${searchOption}, search=${search}, page=${boardList.number})}"><</a>
                </li>

                <li th:each="page: ${#numbers.sequence(start, last)}" th:class="${page == boardList.number + 1} ? 'active'">
                    <a th:text="${page}" th:href="@{/meeting/main/search(search_option=${searchOption}, search=${search}, page=${page})}"></a>
                </li>

                <li th:class="${boardList.last} ? 'disabled'">
                    <a th:href="${boardList.last} ? '#' : @{/meeting/main/search(search_option=${searchOption}, search=${search}, page=${boardList.number + 2})}">></a>
                </li>

                <li>
                    <a th:href="@{/meeting/main/search(search_option=${searchOption}, search=${search}, page=${boardList.totalPages})}">>></a>
                </li>
            </ul>
        </div>


        <div class="search_container">
            <form action="/meeting/main/search" method="GET">
                <select name="search_option">
                    <option value="1">제목만</option>
                    <option value="2">제목+내용</option>
                    <option value="3">글쓴이</option>
                </select>
                <input type="text" placeholder="검색어를 입력하세요" name="search" th:value="${search}">
                <button type="submit">검색</button>
            </form>
        </div>

        <div class="margin_bottom"></div>


    </div>


    <script src="/js/meeting/meetingMain.js"></script>
</div>

</html>
